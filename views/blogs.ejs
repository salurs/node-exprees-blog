<%- include('./partials/head')-%>

  <!-- Page Header -->
  <header class="masthead" style="background-image: url('/img/home-bg.jpg')">
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="site-heading">
            <h2>A technology blog</h2>
            <span class="subheading">The best news; nodejs, expresjs, ejs...</span>
          </div>
        </div>
      </div>
    </div>
  </header>
  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <% if(blogs){ %>
        <% blogs.forEach(function(blog){ %>
          <div class="col-lg-6">
            <div class="post-preview">
              <a href="/blog/<%= blog.slug %>">
              <div class="row">
                <div class="col-3">
                    <img class="w-100" src="/uploads/<%= blog.image %>" alt="#">
                </div>
                <div class="col-9">
                    <h2 class="post-title"><%= blog.title %></h2>
                    <h5 class="post-subtitle text-muted">
                      <%= blog.subtitle %>
                    </h5>
                </div>
              </div>
              </a>
              <p class="post-meta">Posted by
                <a href="#"><%= blog.author %></a>
                on <%= blog.newDate %></p>
            </div>
          </div>
          <hr>
          <% }); %>
        <% } %>
        
       <div class="col-lg-12">
        <div class="clearfix">
          <% if (pages > 0) { %>
            <nav aria-label="navigation">
              <ul class="pagination text-center">
                  <% if (current == 1) { %>
                      <li class="page-item disabled"><a class="page-link">First</a></li>
                  <% } else { %>
                      <li class="page-item"><a class="page-link" href="/blogs/1">First</a></li>
                  <% } %>
                  <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
                  <% if (i !== 1) { %>
                      <li class="page-item disabled"><a class="page-link">...</a></li>
                  <% } %>
                  <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
                      <% if (i == current) { %>
                          <li class="page-item active"><a class="page-link"><%= i %></a></li>
                      <% } else { %>
                          <li class="page-item"><a class="page-link" href="/blogs/<%= i %>"><%= i %></a></li>
                      <% } %>
                      <% if (i == Number(current) + 4 && i < pages) { %>
                          <li class="page-item disabled"><a class="page-link">...</a></li>
                      <% } %>
                  <% } %>
                  <% if (current == pages) { %>
                      <li class="page-item disabled"><a class="page-link">Last</a></li>
                  <% } else { %>
                      <li class="page-item"><a class="page-link" href="/blogs/<%= pages %>">Last</a></li>
                  <% } %>
              </ul>
            </nav>
          <% } %>
        </div>
       </div>
    </div>
  </div>

  <hr>

<%- include('./partials/footer')-%>